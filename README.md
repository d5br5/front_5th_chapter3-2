# 8주차 과제 체크포인트

## 기본 과제

### 필수

- [x] 반복 유형 선택
  - 일정 생성 또는 수정 시 반복 유형을 선택할 수 있다.
  - 반복 유형은 다음과 같다: 매일, 매주, 매월, 매년
    - 만약, 윤년 29일에 또는 31일에 매월 또는 매년 반복일정을 설정한다면 어떻게 처리할까요? 
    - 다른 서비스를 참고해보시고 자유롭게 작성해보세요.
- [x] 반복 간격 설정
  - 각 반복 유형에 대해 간격을 설정할 수 있다.
  - 예: 2일마다, 3주마다, 2개월마다 등
- [x] 반복 일정 표시
  - 캘린더 뷰에서 반복 일정을 시각적으로 구분하여 표시한다.
    - 아이콘을 넣든 태그를 넣든 자유롭게 해보세요!
- [x] 반복 종료
  - 반복 종료 조건을 지정할 수 있다.
  - 옵션: 특정 날짜까지, 특정 횟수만큼, 또는 종료 없음 (예제 특성상, 2025-06-30까지)
- [x] 반복 일정 단일 수정
  - 반복일정을 수정하면 단일 일정으로 변경됩니다.
  - 반복일정 아이콘도 사라집니다.
- [x] 반복 일정 단일 삭제
  - 반복일정을 삭제하면 해당 일정만 삭제합니다.

### 선택

- [ ] 예외 날짜 처리:
  - 반복 일정 중 특정 날짜를 제외할 수 있다.
  - 반복 일정 중 특정 날짜의 일정을 수정할 수 있다.
- [ ] 요일 지정 (주간 반복의 경우):
  - 주간 반복 시 특정 요일을 선택할 수 있다.
- [ ] 월간 반복 옵션:
  - 매월 특정 날짜에 반복되도록 설정할 수 있다.
  - 매월 특정 순서의 요일에 반복되도록 설정할 수 있다.
- [ ] 반복 일정 전체 수정 및 삭제
  - 반복 일정의 모든 일정을 수정할 수 있다.
  - 반복 일정의 모든 일정을 삭제할 수 있다.

## 심화 과제

- [x] 이 앱에 적합한 테스트 전략을 만들었나요?

### 각 팀원들의 테스트 전략은?

- 김진관
    - 일정 관리 앱은 서비스에 가까운 코드라 **단위 테스트보단 통합 테스트나 e2e 테스트를 더 많이 가져가는게 유의미**하다고 생각
    - 단위 테스트로 반복되는 날짜를 생성하는 함수를 검증한다고 해서 반복 일정이 캘린더와 이벤트 목록에 반드시 잘 표시된다는 보장을 할 수는 없을 것 같다.
        - input에 입력된 값을 다시 잘 구성해서 날짜를 만드는 로직을 호출하게 되는 거라 중간에 이를 구성하는 플로우에서 문제가 생기면 결국 날짜를 생성하는 함수가 잘 작동하고 있다고 하더라도 실제로 이벤트가 잘 생성되서 렌더링되지 않을 수도 있다.
    - 당장 생각해봤을 때 **통합 테스트만으로도 충분한 케이스이 대부분**인 것 같다.
    - e2e는 통합 테스트보다는 작게 가져가도 좋을 것 같은데 아직 어떤 곳을 중요한 e2e 테스트가 필요한 지점인지는 잘 모르겠다.
    - 단위 20%, 통합 50%, e2e 30%

- 김도형
    1. 특정 이벤트 목록 input에 대해서, 그게 달력에 잘 표시되는지는 1-2 case만 검증하면 될 것 같다.
    2. **생성조건에 따라 이벤트 목록이 정확하게 생성되는지 테스트하는게 중요**할 것 같다.
    - input → render가 잘 되는지 테스트하는 것보다, render 할 input 목록이 잘 만들어지는지가 중요하다고 생각
        - 특수상황 (연말, 월말, 윤년 등)에 대한 처리를 꼼꼼하게 진행 
    - 테스트를 작성함으로써 개발자 경험에 어떤 도움이 되나? 측면에서 생각해봤을 때
        - E2E, 통합은 필요한만큼만 진행
        - unit 테스트는 정말 자세히 진행 (작성하는데 오래걸리지 않고, 작은 단위로 많이 만들 수 있음)
    - 단위테스트 55% / 통합테스트 30% / E2E 15% 정도?
        - 단위: 유틸함수들 (조건에 따른 이벤트 목록 생성 함수)
        - 통합: 기능단위 수행
        - E2E: 필요시 진행. 최초 접속 → 생성 → 확인 → 수정 등

- 민성윤
    - 각자 가장 중요하게 생각하는 기능에 대한 통합테스트 케이스를 만들면 좋을 것 같다.
    - TDD 로 진행한다고는 하지만 테스트에 대한 신뢰성을 위해 교차검증을 하면 좋을 것 같다. (각자 엣지케이스 찾아주기? 같은)
    - 통합 테스트로는 실제 유저의 경험을 100% 보여줄 수 없다고 생각하기에 통합테스트에서 애매모호하게? 넘어간 테스트케이스가 있다고 가정해보면 그때는 E2E테스트로 실제 렌더링된 화면을 브라우저상에서 테스트하면 좋을 것 같다. 단, **통합테스트 선에서 끝낼 수 있는 테스트는 제외하거나 한두건에서 끝내는게 좋을것** 같다. ⇒ 무의미하게 반복되는 테스트는 제외시키기 위함.
    - 단위 25% 통합 55% E2E 20%

- 서예림
    - 프로젝트의 신뢰성을 높이기 위해서는,,,, 일정 관리라는 프로젝트 특성상
    - **단위 테스트 20%, 통합 테스트 40%, e2e 테스트 40%** ? 비중을 가지고 작성하면 좋을 것 같다.
        - 단위 테스트 ⇒ 순수 함수의 값이 잘 반환되는지, 윤년이나 평년의 날짜 검증, 시간 검증 정도
        - 통합 테스트 ⇒ 상태관리나 데이터 흐름이 잘 동작하는지 테스트 ?!
        - e2e 테스트 ⇒ 동작 UI 되는지 확인하기

### 합의된 테스트 전략과 그 이유는 무엇인가요?

1. 전략
    - **유닛 테스트 비중을 높여 최대한 꼼꼼하게 검증한다.**
    - 통합 테스트는 빠지는 시나리오 없게, 시나리오별 1-2가지만 검증한다.
    - E2E 테스트는 마지막 확인 느낌으로 가볍게 1-2가지만 검증한다.
2. 이유
    - 이벤트 조건 입력(1) -> 등록할 이벤트 목록 계산(2) -> 목록을 렌더링(3)
    - '만약 어떤 시나리오 테스트가 실패한다면, 2->3 에서 실패했을 가능성보다, 1->2 에서 실패했을 가능성이 높다' 고 생각
    - 그려질 이벤트 목록이 제대로 계산되기만 한다면, 화면에 렌더링되는건 잘 될 것 (당연히 실패할 가능성도 있음)
    - 따라서, 
        - '이벤트 목록이 화면에 잘 그려지는지'는 대표적인 몇 가지 경우만 (통합)테스트하고, 
        - **좀 더 문제의 본질에 가까운 '렌더링할 이벤트 목록을 잘 계산해냈는가'를 집중적으로 (유닛)테스트 하는 것이 몇 배는 더 중요하다**고 판단했습니다.

3. 이유2
    - 또한, 단위테스트에 비해 통합, E2E는 테스트 작성, 실행에 상대적으로 더 많은 시간이 소요됩니다. 
    - 기능이 수정되었을 때 변경해줘야 하는 코드도 더 많습니다. 
    - 개발 리소스를 아끼고, 변경에 유연하게 대응하고자 했습니다. 


### 추가로 작성된 테스트 코드는 어떤 것들이 있나요?

- 유틸 함수들의 unit 테스트를 보강했습니다.
- E2E 테스트(playwright)를 추가했습니다. 사용자 동작의 전체적인 흐름을 테스트했습니다.

단위 및 통합테스트

<img width="1265" alt="image" src="https://github.com/user-attachments/assets/83be51fc-f009-4cc8-8473-e26e37da8396" />

E2E 테스트 

<img width="399" alt="image" src="https://github.com/user-attachments/assets/f9f34af5-0ba8-4b8c-be07-dc54e6513bd8" />


---

## 리뷰 (by 성호 코치님)

Q. 위에 적은 것처럼, 렌더링이 잘 되는지 테스트하는 것보다, 렌더링할 목록을 잘 계산해내는 것이 더 중요하다. 그래서 유닛테스트에 비중을 높이겠다. 는 전략이 괜찮은 전략인지 궁금합니다. 실제 현업에서는 개인적으로 혹은 팀 차원에서 테스트 전략을 수립할 텐데, 그 기준이 프로젝트 특성별로 달라질 것 같다는 생각을 했습니다. 혹시 코치님이라면 이 과제에서 테스트 전략을 어떻게 가져가셨을지 궁금합니다.

A. 말씀하신 두 가지는 모두 옳은 것 같아요. 다만 두 개의 레이어가 다르다고 생각합니다. 저 같으면 input을 만들어내는 레이어와 input을 받아 정확하게 렌더링한 레이어(이 경우는 컴포넌트)로 구분하고 각각 목적에 맞게 테스트를 하게 될 것 같습니다. input만 테스트하고 렌더링된 결과물을 테스트하지 않는다면 지금 상황에서는 반쪽짜리 테스트가 되지 않을까 싶어요! 저는 잘게 분리해나가면서 대부분 유닛테스트(통합테스트 포함)로 테스트를 진행하고 앱 전체적인 크리티컬 시나리오만 E2E로 크게 커버할 것 같습니다 :)

Q. 모킹을 함으로써, ‘실제와 완전히 동일한 테스트’와는 한 걸음 멀어지는 느낌을 받았습니다. 완벽한 테스트를 할 수는 없지만 그래도 1차적인 방어선을 구축한다는 느낌으로 테스트를 작성해도 괜찮을까요..?

A. 네, 가급적 모킹은 피하는 게 맞는 것 같아요. 기본적으로 모킹은 호출할 API와 자바스크립트나 브라우저가 제공하는 API들만 모킹하고 나머지는 모킹할 때 정말 모킹이 필요한가 고민하게 됩니다. 다만 내부 구성요소가 적절한 테스트 커버를 하고 있다면, 예를 들어 컴포넌트의 어떤 훅은 정말 모킹이 아니면 테스트를 작성하기 힘들다고 결론이 났다면, 훅에 대한 별도 테스트만 충분하다면 컴포넌트 레벨에서는 훅은 모킹할 수 있을 것 같습니다. 하지만 이 경우도 훅의 변경에 테스트가 깨지지 않을 수 있으니 피해야겠죠~
그리고 1차적인 방어선을 구축한다는 느낌으로 테스트를 작성해도 됩니다. 일단 하는 게 중요한 것 같아요. 해보면서 테스트를 이렇게도 해보고 저렇게도 생각해보면서 테스트의 감을 키우고 테스트의 도움을 더 많이 받을 방법을 찾아보는 게 좋을 것 같아요 :)

